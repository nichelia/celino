version: "3.8"
services:
  diagram-service:
    build:
      context: diagram-service
      dockerfile: Dockerfile
    image: diagram-service
    entrypoint: ["bash"]
    command: -c "python input.py"
    volumes:
      - ./diagram-service/generate_diagrams.py:/tmp/input.py
      - ./diagram-service/bin:/tmp/bin
  
  clearly-server:
    build:
      context: clearly-server
      dockerfile: Dockerfile
    image: clearly-server
    command: server "${BROKER_URI}"
    networks:
      - celino

  clearly-client-info:
    build:
      context: clearly-client-info
      dockerfile: Dockerfile
    image: clearly-client-info
    entrypoint: ["bash"]
    command: -c "python app.py"
    volumes:
      - ./clearly-client-info/app.py:/tmp/app.py
    networks:
      - celino

networks:
  celino:
